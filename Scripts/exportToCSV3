import pandas as pd

data = {
    "id": "chatcmpl-A0SgKCSXp2pLUCJvaNUAphkPd0qe0",
    "choices": [
        {
            "finish_reason": "stop",
            "index": 0,
            "logprobs": null,
            "message": {
                "content": "{\"description\":\"The car appears to be approaching an intersection with road markings indicating a crosswalk. There’s a public parking sign directing to the left and concrete barriers limiting the road space. Nearby buildings suggest a developed urban area.\",\"reasoning\":\"The clear direction of the parking sign indicates an option for the driver. The presence of barriers suggests caution is needed to navigate the area safely without entering restricted zones.\",\"action\":\"Make a left turn towards the public parking area.\"}",
                "refusal": null,
                "role": "assistant",
                "tool_calls": [],
                "parsed": {
                    "description": "The car appears to be approaching an intersection with road markings indicating a crosswalk. There’s a public parking sign directing to the left and concrete barriers limiting the road space. Nearby buildings suggest a developed urban area.",
                    "reasoning": "The clear direction of the parking sign indicates an option for the driver. The presence of barriers suggests caution is needed to navigate the area safely without entering restricted zones.",
                    "action": "Make a left turn towards the public parking area."
                }
            }
        }
    ],
    "created": 1724673616,
    "model": "gpt-4o-mini-2024-07-18",
    "object": "chat.completion",
    "system_fingerprint": "fp_507c9469a1",
    "usage": {
        "completion_tokens": 93,
        "prompt_tokens": 37073,
        "total_tokens": 37166
    }
}

rows = []
for index, choice in enumerate(data['choices'], start=1):
    parsed = choice['message']['parsed']
    row = {
        'Image_ID': index,
        'Model': data['model'],
        'Description': parsed['description'],
        'Action': parsed['action'],
        'Reasoning': parsed['reasoning']
    }
    rows.append(row)

df = pd.DataFrame(rows)

csv_file_path = 'output.csv'

df.to_csv(csv_file_path, index=False)

print(f'Data has been successfully exported to {csv_file_path}')

